{"version":3,"sources":["Components/ImageGalleryItem/ImageGalleryItem.module.scss","Components/Modal/Modal.module.scss","Components/ImageGallery/ImageGallery.module.scss","Components/Button/Button.module.scss","Components/Loader/Loader.module.scss","Components/Searchbar/Searchbar.module.scss","Components/Searchbar/Searchbar.jsx","Components/ImageGallery/ImageGallery.jsx","Components/ImageGalleryItem/ImageGalleryItem.jsx","Components/Button/Button.jsx","Components/Loader/Loader.jsx","Components/Modal/Modal.jsx","api/constants.js","api/images.js","App.js","index.js"],"names":["module","exports","Searchbar","onSubmit","useState","value","setValue","className","s","SearchForm","e","preventDefault","type","SearchForm__button","SearchForm__buttonLabel","onChange","target","SearchForm__input","autoComplete","autoFocus","placeholder","ImageGallery","children","ImageGalleryItem","img","showImage","onClick","src","webformatURL","alt","tags","ImageGalleryItem__image","Button","App","Loader","color","height","width","React","Component","modalRoot","document","querySelector","Modal","image","onClose","useEffect","window","addEventListener","handleKeyDown","removeEventListener","code","currentTarget","createPortal","Overlay","axios","defaults","baseURL","getImages","query","page","a","params","get","data","setPage","setQuery","images","setImages","isLoading","setIsLoading","showModal","setShowModal","setError","bigImg","setBigImg","maxPage","setMaxPage","toggleModal","largeImageURL","setImagesToState","hits","allPages","Math","ceil","total","length","isNaN","loadMore","prevState","map","shortid","generate","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d19d5862.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__idznN\",\"ImageGalleryItem__image\":\"ImageGalleryItem_ImageGalleryItem__image__1H9FL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2henX\",\"Modal\":\"Modal_Modal__2MGU4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__jZwdz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__D1G6C\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Loader\":\"Loader_Loader__1O7ig\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__hrHYR\",\"SearchForm\":\"Searchbar_SearchForm__2K9Wu\",\"SearchForm__button\":\"Searchbar_SearchForm__button__3VNYj\",\"SearchForm__buttonLabel\":\"Searchbar_SearchForm__buttonLabel__1rEEQ\",\"SearchForm__input\":\"Searchbar_SearchForm__input__2bHxK\"};","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport s from './Searchbar.module.scss';\n\nexport default function Searchbar({ onSubmit }) {\n  const [value, setValue] = useState('');\n\n  const onChange = e => {\n    setValue(e.target.value);\n  };\n\n  const handleSearchSubmit = e => {\n    e.preventDefault();\n    onSubmit(value);\n  };\n\n  return (\n    <>\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={handleSearchSubmit}>\n          <button type=\"submit\" className={s.SearchForm__button}>\n            <span className={s.SearchForm__buttonLabel}>Search</span>\n          </button>\n\n          <input\n            value={value}\n            onChange={onChange}\n            className={s.SearchForm__input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n          />\n        </form>\n      </header>\n    </>\n  );\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func,\n};\n","import React from 'react';\nimport s from './ImageGallery.module.scss';\n\nexport default function ImageGallery({ children }) {\n  return <ul className={s.ImageGallery}>{children}</ul>;\n}\n","import React from 'react';\nimport s from './ImageGalleryItem.module.scss';\nimport PropTypes from 'prop-types';\n\nexport default function ImageGalleryItem({ img, showImage }) {\n  return (\n    <li onClick={() => showImage(img)} className={s.ImageGalleryItem}>\n      <img\n        src={img.webformatURL}\n        alt={img.tags}\n        className={s.ImageGalleryItem__image}\n      />\n    </li>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  showImage: PropTypes.func,\n  img: PropTypes.shape({\n    webformatURL: PropTypes.string,\n    tags: PropTypes.string,\n  }),\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport s from './Button.module.scss';\n\nexport default function Button({ onClick }) {\n  return (\n    <button className={s.Button} onClick={onClick} type=\"button\">\n      Load more\n    </button>\n  );\n}\n\nButton.propTypes = {\n  onClick: PropTypes.func,\n};\n","import React from 'react';\nimport Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport s from './Loader.module.scss';\n\n// import PropTypes from 'prop-types';\n\nexport default class App extends React.Component {\n  //other logic\n  render() {\n    return (\n      <Loader\n        className={s.Loader}\n        type=\"Hearts\"\n        color=\"#3f51b5\"\n        height={80}\n        width={80}\n      />\n    );\n  }\n}\n","import React, { useEffect } from 'react';\n\nimport { createPortal } from 'react-dom';\nimport s from './Modal.module.scss';\n\nimport PropTypes from 'prop-types';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default function Modal({ image, onClose }) {\n  useEffect(() => {\n    window.addEventListener('keydown', handleKeyDown);\n    return window.removeEventListener('keydown', handleKeyDown);\n    //eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleKeyDown = e => {\n    if (e.code === 'Escape' || e.currentTarget === e.target) {\n      onClose();\n    }\n  };\n\n  return createPortal(\n    <div className={s.Overlay} onClick={handleKeyDown}>\n      <div className={s.Modal}>\n        <img src={image.src} alt={image.alt} />\n      </div>\n    </div>,\n    modalRoot,\n  );\n}\n\nModal.propTypes = {\n  onClose: PropTypes.func,\n  images: PropTypes.shape({\n    alt: PropTypes.string,\n    src: PropTypes.string,\n  }),\n};\n","const BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '23491087-4191226b82b28486631b9987a';\nconst per_page = 12;\n\nexport { BASE_URL, API_KEY, per_page };\n","import { BASE_URL, API_KEY, per_page } from './constants';\nimport axios from 'axios';\n\naxios.defaults.baseURL = BASE_URL;\n\nexport const getImages = async (query, page) => {\n  const params = `?q=${query}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=${per_page}`;\n  const { data } = await axios.get(params);\n\n  return data;\n};\n","import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport shortid from 'shortid';\nimport Searchbar from './Components/Searchbar/Searchbar.jsx';\nimport ImageGallery from './Components/ImageGallery/ImageGallery.jsx';\nimport ImageGalleryItem from './Components/ImageGalleryItem/ImageGalleryItem.jsx';\nimport Button from './Components/Button/Button.jsx';\nimport Loader from './Components/Loader/Loader.jsx';\nimport Modal from './Components/Modal/Modal.jsx';\nimport { getImages } from 'api/images';\n\nexport default function App() {\n  // state = {\n  //   page: 1,\n  //   query: '',\n  //   images: [],\n  //   isLoading: false,\n  //   error: null,\n  //   showModal: false,\n  //   bigImg: {},\n  //   maxPage: 1,\n  // };\n  const [page, setPage] = useState(1);\n  const [query, setQuery] = useState('');\n  const [images, setImages] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  const [error, setError] = useState(null);\n  const [bigImg, setBigImg] = useState({});\n  const [maxPage, setMaxPage] = useState(1);\n\n  const handleSubmit = value => {\n    setQuery(value);\n  };\n\n  const toggleModal = () => {\n    setShowModal(!showModal);\n  };\n\n  const handleButton = () => {\n    setPage(page + 1);\n    setIsLoading(true);\n  };\n\n  const showImage = img => {\n    toggleModal();\n    setBigImg({ src: img.largeImageURL, alt: img.tags });\n  };\n\n  const setImagesToState = async () => {\n    try {\n      const data = await getImages(query, page);\n      const images = data.hits;\n      const allPages = Math.ceil(data.total / images.length);\n      if (!isNaN(allPages)) {\n        setMaxPage(allPages);\n      } else {\n        setMaxPage(0);\n      }\n      setImages(images);\n    } catch (error) {\n      setError(error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const loadMore = async () => {\n    try {\n      const data = await getImages(query, page);\n      const images = data.hits;\n      setImages(prevState => [...prevState, ...images.map(img => img)]);\n    } catch (error) {\n      setError(error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  //---------------------------------------------------------------------------\n  // не разобралась с useEffect - написала методом проб и ошибок!!!\n  //---------------------------------------------------------------------------\n  useEffect(() => {\n    setIsLoading(true);\n    setImagesToState();\n    //eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [query]);\n\n  useEffect(() => {\n    loadMore();\n    //eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [page]);\n\n  return (\n    <>\n      <Searchbar onSubmit={handleSubmit} />\n      {images.length > 0 && (\n        <ImageGallery showImage={showImage}>\n          {images.map(img => {\n            return (\n              <ImageGalleryItem\n                key={shortid.generate()}\n                img={img}\n                showImage={showImage}\n              />\n            );\n          })}\n          {showModal && <Modal onClose={toggleModal} image={bigImg} />}\n        </ImageGallery>\n      )}\n\n      {isLoading && <Loader />}\n\n      {maxPage > page && images.length > 0 && <Button onClick={handleButton} />}\n    </>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}